<div class="game-container">

  <!-- Header -->
  <div class="header">
    <button class="menu-btn"  (click)="toggleRules()">MENU</button>
    <!-- Feedback while processing the logic -->
    <div *ngIf="gameService.isVsCPU && gameService.currentPlayer === 2 && !gameService.gameOver" class="thinking-msg">
      ðŸ¤– The Computer is thinking...
    </div>
    <button class="restart-btn" (click)="resetGame()">RESTART</button>
  </div>
    
  <!-- Main -->
  <div class="main">

    <!-- Player 1 -->
    <div class="d-flex timer-wrapper ">
      <app-turn-timer *ngIf="gameService.showTimerFirstPlayer  && !showStartModal" [player]="1"
      [isActive]="!showStartModal"
      ></app-turn-timer>      
      <div 
      [ngClass]="{ 'active-player': gameService.currentPlayer === 1 }"
      class="player-panel">
        <div class="player-icon">ðŸ˜Š</div>
        <div class="label">{{ storageSer.playerNames[1] }}</div>
        <div class="score">{{ gameService.score[1] }}</div>
      </div>
    </div>

    <!-- Board -->
    <app-game-board></app-game-board>

    <!-- Player 2 -->
    <div class="d-flex timer-wrapper">
      <app-turn-timer *ngIf="gameService.showTimerSecondPlayer  && !showStartModal"
      [isActive]="!showStartModal"
      [player]="2"
      ></app-turn-timer>
      <div 
      [ngClass]="{ 'active-player': gameService.currentPlayer === 2 }"
      class="player-panel">
        <div class="player-icon">ðŸ˜Ž</div>
        <div class="label">{{ storageSer.playerNames[2] }}</div>
        <div class="score">{{ gameService.score[2] }}</div>
      </div>
    </div>

  </div>
</div>

<!-- Victory Modal to Celebrate -->
<app-victory-modal
  [winner]="gameService.winner"
  (playAgain)="resetGame()">
</app-victory-modal>

<!-- Starter Modal to choose AI or two players -->
<app-start-modal *ngIf="showStartModal" (start)="onGameStart($event)"></app-start-modal>

<!-- Show the rules -->
<app-rules-modal *ngIf="showRules" (close)="toggleRules()"></app-rules-modal>